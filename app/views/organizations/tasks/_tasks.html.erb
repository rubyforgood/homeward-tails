<div class="col-md-12 col-xl-8 col-12">
  <div class="row">
    <div class="col-12 mb-4">
      <div class="card">
        <div class="card-header">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <h4 class="mb-0">Summary</h4>
            </div>
            <!-- dropdown -->
            <div>
              <span class="dropdown dropstart">
                <a class="btn-icon btn btn-ghost btn-sm rounded-circle" href="#" role="button" id="DropdownTen" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  <i class="fe fe-more-vertical"></i>
                </a>
                <span class="dropdown-menu" aria-labelledby="DropdownTen">
                  <span class="dropdown-header">Settings</span>
                  <%= link_to t('general.edit'), edit_pet_path(@pet), class: 'dropdown-item' %>
                  <%= link_to t('general.delete'), pet_path(@pet), class: 'dropdown-item',
                    data: {
                      turbo_method: :delete,
                      turbo_confirm: t('organization_pets.show.are_you_sure_delete')
                    } %>
                </span>
              </span>
            </div>
          </div>
        </div>

        <div class="card-body">
          <h5>Tasks</h5> <!-- Task header -->

          <ul class="list-group list-group-flush">
            <% @pet.tasks.each do |task| %>
              <li class="list-group-item px-0">
                <div class="d-flex justify-content-between align-items-center">
                  <div class="d-flex align-items-center">
                    <i class="fe fe-check-square me-2"></i> <!-- A generic icon for tasks; change as needed -->
                    <div class="ms-2">
                      <h6 class="mb-0 text-body"><%= task.name %></h6> <!-- Task title -->
                    </div>
                  </div>
                  <div class="d-flex align-items-center">
                    <p class="text-dark mb-0 fw-semibold mr-3">
                      <%= task.completed? ? "Completed" : "Pending" %> <!-- Task status -->
                    </p>
                    <%= link_to 'Edit', edit_pet_task_path(@pet, task), class: 'btn btn-warning mr-4' %>
                    <%= link_to 'Delete', pet_task_path(@pet, task), class: 'btn btn-danger', data: { turbo_method: "delete", turbo_confirm: 'Are you sure?' } %>
                  </div>
                </div>
              </li>
            <% end %>

          </ul>
          <button type="button" class="add-new-task-button btn btn-primary" data-bs-toggle="modal" data-bs-target="#newTaskModal">Add New Task</button>
          <div class="modal" tabindex="-1" id="newTaskModal">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="taskModalTitle">New Task</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <%= render 'nice_partials/new_task_form', pet: @pet, task: @pet.tasks.build %>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
